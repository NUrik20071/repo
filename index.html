<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин</title>
    <style>
        .product { border: 1px solid #ddd; padding: 10px; margin: 10px; display: inline-block; }
        .product img { width: 150px; height: 150px; }
    </style>
</head>
<body>
    <h2>Магазин</h2>
    <div id="productList"></div>

    <script>
        const TXT_FILE_ID = "ID_ФАЙЛА_PRODUCTS.TXT"; 
        const FOLDER_ID = "ID_ПАПКИ_С_ТОВАРАМИ";  

        async function fetchProducts() {
            const response = await fetch(`https://www.googleapis.com/drive/v3/files/${TXT_FILE_ID}?alt=media`, {
                headers: { Authorization: `Bearer ${localStorage.getItem("access_token")}` }
            });

            const text = await response.text();
            displayProducts(text);
        }

        function displayProducts(data) {
            const productList = document.getElementById("productList");
            productList.innerHTML = "";

            const products = data.split("\n").map(line => line.split("|"));
            products.forEach(([id, name, price, imageId]) => {
                const div = document.createElement("div");
                div.className = "product";
                div.innerHTML = `
                    <img src="https://drive.google.com/uc?id=${imageId}" alt="${name}">
                    <h3>${name}</h3>
                    <p>Цена: ${price}₽</p>
                    <a href="https://example-payment.com/pay?product=${id}" target="_blank">
                        <button>Купить</button>
                    </a>
                `;
                productList.appendChild(div);
            });
        }

        fetchProducts();
    </script>
</body>
</html>
